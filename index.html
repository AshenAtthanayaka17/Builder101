<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airbus MCDU FMC Interface</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Styles for Airbus MCDU Aesthetic */
        body {
            font-family: 'Inter', monospace;
            background-color: #111827; /* Dark background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        /* MCDU Case Styling */
        #mcdu-case {
            background-color: #374151; /* Dark gray case */
            border: 4px solid #4b5563;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            max-width: 450px;
            width: 100%;
            padding: 1rem;
        }

        /* Screen Display Styling */
        #mcdu-display {
            background-color: #1f2937; /* Dark screen background */
            border: 2px solid #6b7280;
            border-radius: 6px;
            padding: 0.5rem;
            height: 350px; /* Fixed height for screen area */
            margin-bottom: 1rem;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
        }

        /* Text Colors - Amber Glow for Cockpit Displays */
        .amber-text { color: #f59e0b; }
        .amber-dim { color: #d97706; }
        .white-text { color: #f3f4f6; }
        .green-text { color: #10b981; }

        /* Screen Lines */
        .mcdu-line {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            line-height: 1.4;
            letter-spacing: 0.05em;
        }

        .lsk-key {
            background-color: #4b5563;
            color: #f3f4f6;
            height: 40px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.1s, transform 0.1s;
        }
        .lsk-key:active {
            background-color: #6b7280;
            transform: scale(0.98);
        }

        /* Function Keys (F-PLN, INIT, etc.) */
        .func-key {
            background-color: #374151;
            color: #f3f4f6;
            font-weight: bold;
            font-size: 0.75rem;
            height: 30px;
            border-radius: 4px;
            transition: background-color 0.1s;
        }
        .func-key:active {
            background-color: #4b5563;
        }

        /* Alphanumeric Keys */
        .alphanum-key {
            background-color: #1f2937;
            color: #f3f4f6;
            height: 45px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.1s;
            border: 1px solid #4b5563;
        }
        .alphanum-key:active {
            background-color: #4b5563;
        }
        
        /* Specific Keys */
        .clear-key { background-color: #b91c1c; } /* Red for CLEAR */
        .clear-key:active { background-color: #dc2626; }

    </style>
</head>
<body>

    <div id="mcdu-case">

        <!-- MCDU Display Area -->
        <div id="mcdu-display" class="relative">
            <!-- Line Select Keys (LSK) Left Side -->
            <div class="absolute left-0 top-0 h-full flex flex-col justify-around py-1">
                <button class="lsk-key w-8 my-1" data-lsk="L1"></button>
                <button class="lsk-key w-8 my-1" data-lsk="L2"></button>
                <button class="lsk-key w-8 my-1" data-lsk="L3"></button>
                <button class="lsk-key w-8 my-1" data-lsk="L4"></button>
                <button class="lsk-key w-8 my-1" data-lsk="L5"></button>
                <button class="lsk-key w-8 my-1" data-lsk="L6"></button>
            </div>

            <!-- Main Text Content Area -->
            <div id="display-content" class="px-8 space-y-2 pt-1 pb-2">
                <!-- Content will be injected here by JavaScript -->
            </div>

            <!-- Line Select Keys (LSK) Right Side -->
            <div class="absolute right-0 top-0 h-full flex flex-col justify-around py-1">
                <button class="lsk-key w-8 my-1" data-lsk="R1"></button>
                <button class="lsk-key w-8 my-1" data-lsk="R2"></button>
                <button class="lsk-key w-8 my-1" data-lsk="R3"></button>
                <button class="lsk-key w-8 my-1" data-lsk="R4"></button>
                <button class="lsk-key w-8 my-1" data-lsk="R5"></button>
                <button class="lsk-key w-8 my-1" data-lsk="R6"></button>
            </div>
            
            <!-- Scratchpad (Bottom line of the screen) -->
            <div id="scratchpad" class="absolute bottom-1 left-8 right-8 mcdu-line font-bold text-lg border-t border-gray-600 pt-1 amber-text">
                >
            </div>
        </div>

        <!-- Function Key Row (Top Row) -->
        <div class="grid grid-cols-6 gap-2 mb-2">
            <button class="func-key" data-func="INIT">INIT</button>
            <button class="func-key" data-func="F-PLN">F-PLN</button>
            <button class="func-key" data-func="PROG">PROG</button>
            <button class="func-key" data-func="PERF">PERF</button>
            <button class="func-key" data-func="RAD-NAV">RAD-NAV</button>
            <button class="func-key" data-func="FUEL">FUEL</button>
        </div>

        <!-- Alphanumeric Keypad -->
        <div class="grid grid-cols-6 gap-2">
            <!-- Row 1: A B C D E / 1 -->
            <button class="alphanum-key" data-input="A">A</button>
            <button class="alphanum-key" data-input="B">B</button>
            <button class="alphanum-key" data-input="C">C</button>
            <button class="alphanum-key" data-input="D">D</button>
            <button class="alphanum-key" data-input="E">E</button>
            <button class="alphanum-key" data-input="1">1</button>

            <!-- Row 2: F G H I J / 2 -->
            <button class="alphanum-key" data-input="F">F</button>
            <button class="alphanum-key" data-input="G">G</button>
            <button class="alphanum-key" data-input="H">H</button>
            <button class="alphanum-key" data-input="I">I</button>
            <button class="alphanum-key" data-input="J">J</button>
            <button class="alphanum-key" data-input="2">2</button>

            <!-- Row 3: K L M N O / 3 -->
            <button class="alphanum-key" data-input="K">K</button>
            <button class="alphanum-key" data-input="L">L</button>
            <button class="alphanum-key" data-input="M">M</button>
            <button class="alphanum-key" data-input="N">N</button>
            <button class="alphanum-key" data-input="O">O</button>
            <button class="alphanum-key" data-input="3">3</button>

            <!-- Row 4: P Q R S T / 4 -->
            <button class="alphanum-key" data-input="P">P</button>
            <button class="alphanum-key" data-input="Q">Q</button>
            <button class="alphanum-key" data-input="R">R</button>
            <button class="alphanum-key" data-input="S">S</button>
            <button class="alphanum-key" data-input="T">T</button>
            <button class="alphanum-key" data-input="4">4</button>

            <!-- Row 5: U V W X Y / 5 -->
            <button class="alphanum-key" data-input="U">U</button>
            <button class="alphanum-key" data-input="V">V</button>
            <button class="alphanum-key" data-input="W">W</button>
            <button class="alphanum-key" data-input="X">X</button>
            <button class="alphanum-key" data-input="Y">Y</button>
            <button class="alphanum-key" data-input="5">5</button>

            <!-- Row 6: Z 0 . + - / 6 -->
            <button class="alphanum-key" data-input="Z">Z</button>
            <button class="alphanum-key" data-input="0">0</button>
            <button class="alphanum-key" data-input=".">.</button>
            <button class="alphanum-key" data-input="+">+</button>
            <button class="alphanum-key" data-input="-">-</button>
            <button class="alphanum-key" data-input="6">6</button>

            <!-- Row 7: Special Keys / 7 8 9 / CLR -->
            <button class="alphanum-key" data-input="SPARE">SPARE</button>
            <button class="alphanum-key" data-input="7">7</button>
            <button class="alphanum-key" data-input="8">8</button>
            <button class="alphanum-key" data-input="9">9</button>
            <button class="alphanum-key clear-key" data-input="CLR">CLR</button>
            <button class="alphanum-key" data-input="/">/</button>
        </div>

    </div>

    <script>
        // --- FMC SIMULATION CORE LOGIC ---

        const displayContent = document.getElementById('display-content');
        const scratchpadElement = document.getElementById('scratchpad');
        const MAX_SCRATCHPAD_LENGTH = 18;

        let scratchpad = "";
        let currentPage = "INIT";
        let pages = {}; // Holds the current display state of each page

        // Simulated Database/State for F-PLN and INIT
        let navData = {
            ORIGIN: "----",
            DEST: "----",
            FLIGHT_NO: "",
            COST_INDEX: "30",
            CRZ_FL: "350",
            ROUTE: ["KLAX", "JASPR", "KJFK"] // Simulated waypoints
        };

        // --- PAGE DEFINITIONS (Simulated content) ---

        function getInitPage() {
            return `
                <div class="mcdu-line white-text font-bold mb-2">
                    <span><span class="amber-text">INIT</span> / B</span>
                    <span class="text-right text-sm">ALIGN: ${new Date().toLocaleTimeString()}</span>
                </div>
                <div class="mcdu-line">
                    <span class="green-text">A/C STATUS</span>
                    <span class="amber-dim">NAV DATA BASE</span>
                </div>
                <div class="mcdu-line">
                    <span class="amber-dim">FLT NO:</span>
                    <span class="amber-text">${navData.FLIGHT_NO || 'INPUT'}</span>
                </div>
                <div class="mcdu-line mt-3">
                    <span class="amber-dim">FROM/TO</span>
                </div>
                <div class="mcdu-line">
                    <span class="amber-text">${navData.ORIGIN}</span>
                    <span class="green-text">COST INDEX</span>
                </div>
                <div class="mcdu-line">
                    <span class="amber-text">&nbsp;</span>
                    <span class="amber-text">${navData.COST_INDEX}</span>
                </div>
                <div class="mcdu-line mt-3">
                    <span class="amber-dim">CRZ FL/TEMP</span>
                    <span class="green-text">ZFW/ZFWCG</span>
                </div>
                <div class="mcdu-line">
                    <span class="amber-text">${navData.CRZ_FL}</span>
                    <span class="amber-text">--/--</span>
                </div>
                <div class="mcdu-line mt-3">
                    <span class="green-text">SEC F-PLN</span>
                </div>
            `;
        }

        function getFplnPage() {
            let routeDisplay = navData.ROUTE.map((wp, index) => {
                let color = index === 0 ? 'green-text' : 'white-text';
                return `<div class="mcdu-line"><span class="${color} flex-grow">${wp}</span><span class="${color} text-right">${index === 0 ? 'T/O' : 'FLXXX'}</span></div>`;
            }).join('');
            
            // Add blank lines to fill the display
            while (navData.ROUTE.length < 5) {
                routeDisplay += `<div class="mcdu-line"><span class="amber-dim flex-grow">----</span><span class="amber-dim text-right">----</span></div>`;
                navData.ROUTE.push(null); // Just to simplify the loop, not actual data change
            }
            navData.ROUTE = navData.ROUTE.filter(r => r !== null); // Clean up the temp additions

            return `
                <div class="mcdu-line amber-text font-bold mb-2">
                    <span>F-PLN</span>
                    <span class="text-right text-sm">${navData.ORIGIN} - ${navData.DEST}</span>
                </div>
                <div class="mcdu-line">
                    <span class="green-text">--</span>
                    <span class="green-text">RTE 1</span>
                </div>
                ${routeDisplay}
                <div class="mcdu-line mt-3">
                    <span class="green-text">ARRIVALS</span>
                </div>
            `;
        }

        // --- DISPLAY MANAGEMENT ---

        function updateDisplay() {
            let html = "";
            switch (currentPage) {
                case "INIT":
                    html = getInitPage();
                    break;
                case "F-PLN":
                    html = getFplnPage();
                    break;
                default:
                    html = `<div class="mcdu-line amber-text font-bold mb-2"><span>${currentPage}</span><span class="text-right text-sm">NOT IN USE</span></div><div class="mcdu-line mt-6"><span class="amber-dim text-center w-full">PAGE NOT AVAILABLE</span></div>`;
            }
            displayContent.innerHTML = html;
            scratchpadElement.textContent = "> " + scratchpad;
        }

        function clearScratchpad() {
            scratchpad = "";
        }

        function displayError(message) {
            scratchpad = "CHECK ENTRY"; // Standard FMC Error message
            scratchpadElement.textContent = "> " + scratchpad;
            setTimeout(() => {
                scratchpad = "";
                updateDisplay();
            }, 1500);
        }

        // --- KEY HANDLING ---

        function handleKeyInput(key) {
            if (key === "CLR") {
                clearScratchpad();
            } else if (key === "SPARE") {
                // Do nothing
            } else {
                if (scratchpad.length < MAX_SCRATCHPAD_LENGTH) {
                    scratchpad += key;
                }
            }
            updateDisplay();
        }

        function handleFuncKey(pageName) {
            currentPage = pageName;
            clearScratchpad();
            updateDisplay();
        }

        function handleLSK(lskId) {
            if (scratchpad === "") {
                // If scratchpad is empty, clear the target field or copy data from it (Simulated)
                if (currentPage === "INIT" && lskId === "R2") {
                    navData.COST_INDEX = "30"; // Reset CI
                } else if (currentPage === "F-PLN" && lskId === "L1") {
                    // Simulating selecting a waypoint
                    clearScratchpad();
                    navData.ROUTE = ["KLAX", "JASPR", "KJFK"];
                }
                updateDisplay();
                return;
            }

            // Transfer data from scratchpad to the correct field
            if (currentPage === "INIT") {
                if (lskId === "L2") { // FLT NO
                    navData.FLIGHT_NO = scratchpad;
                    clearScratchpad();
                } else if (lskId === "L4") { // FROM/TO (Origin)
                    // Simple logic: if scratchpad contains /, split it into FROM/TO
                    if (scratchpad.includes('/')) {
                        const [from, to] = scratchpad.split('/');
                        navData.ORIGIN = from.trim().toUpperCase();
                        navData.DEST = to.trim().toUpperCase();
                        clearScratchpad();
                    } else {
                        displayError("ENTER FROM/TO");
                    }
                } else if (lskId === "R2") { // COST INDEX
                    if (!isNaN(parseInt(scratchpad))) {
                         navData.COST_INDEX = scratchpad;
                         clearScratchpad();
                    } else {
                        displayError("INVALID INPUT");
                    }
                } else if (lskId === "L6") { // CRZ FL
                    if (!isNaN(parseInt(scratchpad))) {
                         navData.CRZ_FL = scratchpad.replace('F', '');
                         clearScratchpad();
                    } else {
                        displayError("INVALID INPUT");
                    }
                } else {
                    displayError("NOT IMPLEMENTED");
                }
            } else if (currentPage === "F-PLN") {
                // Simple logic: insert waypoint below LSK R1
                if (lskId === "R1") {
                    navData.ROUTE.splice(1, 0, scratchpad.toUpperCase());
                    clearScratchpad();
                } else {
                    displayError("NOT IMPLEMENTED");
                }
            }
            
            updateDisplay();
        }

        // --- EVENT LISTENERS ---

        function setupListeners() {
            // Alphanumeric and CLR keys
            document.querySelectorAll('.alphanum-key').forEach(button => {
                button.addEventListener('click', () => handleKeyInput(button.dataset.input));
            });

            // Function keys (INIT, F-PLN, etc.)
            document.querySelectorAll('.func-key').forEach(button => {
                button.addEventListener('click', () => handleFuncKey(button.dataset.func));
            });

            // Line Select Keys (LSK)
            document.querySelectorAll('.lsk-key').forEach(button => {
                button.addEventListener('click', () => handleLSK(button.dataset.lsk));
            });
            
            // Global Keyboard Listener for desktop users
            document.addEventListener('keydown', (event) => {
                const key = event.key.toUpperCase();
                if (key.length === 1 && (key >= 'A' && key <= 'Z' || key >= '0' && key <= '9' || key === '.' || key === '+' || key === '-' || key === '/')) {
                    handleKeyInput(key);
                } else if (key === 'ENTER') {
                    // Simulate pressing R1 (a common action)
                    handleLSK('R1');
                } else if (key === 'BACKSPACE') {
                    // Simulate backspacing
                    if (scratchpad.length > 0) {
                        scratchpad = scratchpad.slice(0, -1);
                        updateDisplay();
                    }
                }
            });
        }

        // --- INITIALIZATION ---

        window.onload = function() {
            setupListeners();
            updateDisplay(); // Load the initial page
        };
    </script>

</body>
</html>

